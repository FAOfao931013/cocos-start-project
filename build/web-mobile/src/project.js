require=function t(e,o,c){function n(a,s){if(!o[a]){if(!e[a]){var r="function"==typeof require&&require;if(!s&&r)return r(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var p=o[a]={exports:{}};e[a][0].call(p.exports,function(t){var o=e[a][1][t];return n(o||t)},p,p.exports,t,e,o,c)}return o[a].exports}for(var i="function"==typeof require&&require,a=0;a<c.length;a++)n(c[a]);return n}({CollectionGroup:[function(t,e,o){"use strict";cc._RF.push(e,"250a0uCboNJra5pGDLVtPe6","CollectionGroup");var c=cc.Class({name:"star",properties:{name:"",prefab:cc.Prefab,poolAmount:0,duration:0}}),n=cc.Class({name:"gift",properties:{name:"",prefab:cc.Prefab,poolAmount:0,duration:0}});cc.Class({extends:cc.Component,properties:function(){return{canvas:cc.Node,player:cc.Node,scoreNode:cc.Node,star:{default:null,type:c},gift:{default:null,type:n}}},gainScore:function(){this.scoreNode.gainScore()},spawnCollection:function(t){var e=t.name+"Pool";return G.common.spawnNewNode(this[e],t.prefab,this.canvas)},spawnNewStar:function(){var t=this.spawnCollection(this.star);t.setPosition(this.getNewStarPosition(t)),t.getComponent("Star").collectionGroup=this,this.newStar=t},getNewStarPosition:function(t){var e=0,o=(Math.random()+1)*this.player.getComponent("Player").jumpHeight/2+this.player.getComponent("Player").beginY,c=this.canvas.width/2-40;return e=cc.randomMinus1To1()*c,Math.abs(e-this.player.x)<t.getComponent("Star").pickRadius&&(e<0?e-=50:e+=50),cc.p(e,o)},putBackStar:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.newStar;G.common.putBackNode(this,t)},onLoad:function(){G.common.initPool(this,this.star),G.common.initPool(this,this.gift),this.scoreNode=this.scoreNode.getComponent("Score")}}),cc._RF.pop()},{}],Common:[function(t,e,o){"use strict";cc._RF.push(e,"dead3j88RxBFYP/9AvQNPDA","Common"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){G.common=this},initPool:function(t,e){var o=e.name+"Pool";t[o]=new cc.NodePool;for(var c=0;c<e.poolAmount;c++){var n=cc.instantiate(e.prefab);t[o].put(n)}},spawnNewNode:function(t,e,o){var c=void 0;return c=t.size()>0?t.get():cc.instantiate(e),o.addChild(c),c},putBackNode:function(t,e){t[e.name+"Pool"].put(e)}}),cc._RF.pop()},{}],Countdown:[function(t,e,o){"use strict";cc._RF.push(e,"8c2a9gkjRVL4r991yjdzxQG","Countdown"),cc.Class({extends:cc.Component,properties:{duration:{default:60,type:cc.Integer},game:cc.Node},onLoad:function(){this.game=this.game.getComponent("Game")},start:function(){this.node.getComponent(cc.Label).string="倒计时："+this.duration+"S",this.upString()},upString:function(){this.callBack=function(){if(0==this.duration)return this.unschedule(this.callBack),void this.game.gameOver();this.duration-=1,this.node.getComponent(cc.Label).string="倒计时："+this.duration+"S"},this.schedule(this.callBack,1)},addMoreDuration:function(t){this.duration+=t},update:function(t){}}),cc._RF.pop()},{}],Final:[function(t,e,o){"use strict";cc._RF.push(e,"ae21fMrQU5BZoYGn+XbjZGS","Final"),cc.Class({extends:cc.Component,properties:{finalScore:cc.Node,scoreNode:cc.Node,moveDuration:3},moveToCenter:function(){var t=cc.moveTo(this.moveDuration,cc.p(0,0)).easing(cc.easeCubicActionIn());this.node.runAction(t),this.changeFinalScore()},changeFinalScore:function(){this.finalScore.getComponent(cc.Label).string="最终得分: "+this.scoreNode.getComponent("Score").score},onLoad:function(){}}),cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"61726vvoIxL7JBoHwvzti97","Game"),cc.Class({extends:cc.Component,properties:{starPrefab:{default:null,type:cc.Prefab},giftPrefab:{default:null,type:cc.Prefab},maxStarDuration:0,player:{default:null,type:cc.Node},canvas:cc.Node,scoreNode:cc.Node,scoreboard:cc.Node,collectionGroup:cc.Node},gameOver:function(){this.player.stopAllActions(),this.player.getComponent("Player").removeKeyboardListener(),this.player.getComponent("Player").hide(),this.over=!0,this.scoreboard.getComponent("Final").moveToCenter(),this.collectionGroup.getComponent("CollectionGroup").putBackStar()},restart:function(){cc.director.loadScene("start")},onLoad:function(){this.collectionGroup.getComponent("CollectionGroup").spawnNewStar()},start:function(){this.timer=0,this.starDuration=0,this.over=!1},update:function(t){this.over}}),cc._RF.pop()},{}],Global:[function(t,e,o){"use strict";cc._RF.push(e,"970acXI7gFGZobKmMchiMja","Global"),window.G={common:null},cc._RF.pop()},{}],Home:[function(t,e,o){"use strict";cc._RF.push(e,"fa2d16nioRClb/pKX22XCNB","Home"),cc.Class({extends:cc.Component,properties:{explainWrap:cc.Node},startGame:function(){cc.director.loadScene("game")},showExplain:function(){this.explainWrap.active=!0},closeExplain:function(){this.explainWrap.active=!1},onLoad:function(){}}),cc._RF.pop()},{}],Player:[function(t,e,o){"use strict";cc._RF.push(e,"ca57cmgA6pJG4GiMtZKDirk","Player"),cc.Class({extends:cc.Component,properties:{jumpHeight:0,jumpDuration:0,maxMoveSpeed:0,accel:0,beginY:-320,canvas:{default:null,type:cc.Node},sound:cc.Node},setJumpAction:function(){var t=cc.moveBy(this.jumpDuration,cc.p(0,this.jumpHeight)).easing(cc.easeCubicActionOut()),e=cc.moveBy(this.jumpDuration,cc.p(0,-this.jumpHeight)).easing(cc.easeCubicActionIn()),o=cc.callFunc(this.playJumpSound,this);return cc.repeatForever(cc.sequence(t,e,o))},playJumpSound:function(){this.sound.getComponent("Sound").playJumpSound()},setInputControl:function(){var t=this;this.keyboardListener=cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(e,o){switch(e){case cc.KEY.a:t.accLeft=!0,t.accRight=!1;break;case cc.KEY.d:t.accLeft=!1,t.accRight=!0}},onKeyReleased:function(e,o){switch(e){case cc.KEY.a:t.accLeft=!1;break;case cc.KEY.d:t.accRight=!1}}},t.node)},removeKeyboardListener:function(){cc.eventManager.removeListener(this.keyboardListener)},hide:function(){this.node.active=!1},onLoad:function(){this.jumpAction=this.setJumpAction(),this.node.runAction(this.jumpAction),this.accLeft=!1,this.accRight=!1,this.xSpeed=0,this.setInputControl()},update:function(t){this.accLeft?this.xSpeed-=this.accel*t:this.accRight&&(this.xSpeed+=this.accel*t),Math.abs(this.xSpeed)>this.maxMoveSpeed&&(this.xSpeed=this.maxMoveSpeed*this.xSpeed/Math.abs(this.xSpeed)),this.node.x+=this.xSpeed*t,this.node.x>this.canvas.width/2&&(this.node.x=-this.canvas.width/2),this.node.x<-this.canvas.width/2&&(this.node.x=this.canvas.width/2)}}),cc._RF.pop()},{}],Score:[function(t,e,o){"use strict";cc._RF.push(e,"72a26m3SuhHTY+bInGTq72L","Score"),cc.Class({extends:cc.Component,properties:{sound:cc.Node,score:0},gainScore:function(){this.score+=1,this.node.getComponent(cc.Label).string="Score: "+this.score,this.playScoreAudio()},playScoreAudio:function(){this.sound.getComponent("Sound").playScoreAudio()},onLoad:function(){}}),cc._RF.pop()},{}],Sound:[function(t,e,o){"use strict";cc._RF.push(e,"24cedONMeRBe7hwZt8dYIx/","Sound"),cc.Class({extends:cc.Component,properties:{jumpAudio:{default:null,url:cc.AudioClip},scoreAudio:{default:null,url:cc.AudioClip}},playJumpSound:function(){cc.audioEngine.playEffect(this.jumpAudio,!1)},playScoreAudio:function(){cc.audioEngine.playEffect(this.scoreAudio,!1)},onLoad:function(){}}),cc._RF.pop()},{}],Star:[function(t,e,o){"use strict";cc._RF.push(e,"6f1deZxolVOxLJfzlylca6E","Star"),cc.Class({extends:cc.Component,properties:{pickRadius:0},getPlayerDistance:function(){var t=this.collectionGroup.player.getPosition();return cc.pDistance(this.node.position,t)},onPicked:function(){this.collectionGroup.gainScore(),this.backNode(),this.collectionGroup.spawnNewStar()},backNode:function(){this.collectionGroup.putBackStar(this.node)},onLoad:function(){},update:function(t){this.getPlayerDistance()<this.pickRadius&&this.onPicked()}}),cc._RF.pop()},{}]},{},["CollectionGroup","Common","Countdown","Final","Game","Global","Home","Player","Score","Sound","Star"]);